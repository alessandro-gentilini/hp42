<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2021-05-14 Fri 18:16 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>free42 Custom Menus</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Mitch Richling" />
<meta name="description" content="Making Custom Menus for the free42/hp-42s/DM42"
 />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<style>body { width: 95%; margin: 2% auto; font-size: 18px; line-height: 1.4em; font-family: Georgia, serif; color: black; background-color: white; }</style>
<style>body { min-width: 500px; max-width: 1024px; }</style>
<style>h1,h2,h3,h4,h5,h6 { color: #A5573E; line-height: 1em; font-family: Helvetica, sans-serif; }</style>
<style>h1,h2,h3 { line-height: 1.4em; }</style>
<style>h1.title { font-size: 3em; }</style>
<style>h4,h5,h6 { font-size: 1em; }</style>
<style>.org-src-container { border: 1px solid #ccc; box-shadow: 3px 3px 3px #eee; font-family: Lucida Console, monospace; font-size: 80%; margin: 0px; padding: 0px 0px; position: relative; }</style>
<style>.org-src-container>pre { line-height: 1.2em; padding-top: 1.5em; margin: 0.5em; background-color: #404040; color: white; overflow: auto; }</style>
<style>.org-src-container>pre:before { display: block; position: absolute; background-color: #b3b3b3; top: 0; right: 0; padding: 0 0.2em 0 0.4em; border-bottom-left-radius: 8px; border: 0; color: white; font-size: 100%; font-family: Helvetica, sans-serif;}</style>
<style>pre.example { white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -o-pre-wrap; font-family: Lucida Console, monospace; font-size: 80%; background: #404040; color: white; display: block; padding: 0em; border: 2px solid black; }</style>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="https://richmit.github.io/hp42/"> UP </a>
 |
 <a accesskey="H" href="https://www.mitchr.me/"> HOME </a>
</div><div id="content">
<h1 class="title">free42 Custom Menus</h1>
<table border="2 solid #ccc" cellspacing="0" cellpadding="6" rules="groups" frame="hsides" align="center">


<colgroup>
<col  class="org-right" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-right"><b>Author:</b></td>
<td class="org-left"><i>Mitch Richling</i></td>
</tr>

<tr>
<td class="org-right"><b>Updated:</b></td>
<td class="org-left"><i>2021-05-14 18:16:08</i></td>
</tr>
</tbody>
</table>
<p align="center">
Copyright 2021 Mitch Richling. All rights reserved.
</p>

<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org970e641">1. Metadata</a></li>
<li><a href="#introduction">2. Introduction</a>
<ul>
<li><a href="#orgef94af0">2.1. Customizing Custom Menu Table</a></li>
</ul>
</li>
<li><a href="#orgb3f7b21">3. Custom Menus</a>
<ul>
<li><a href="#org832fc16">3.1. Menu Contents</a></li>
<li><a href="#org1fc05b3">3.2. Menu Code</a></li>
</ul>
</li>
<li><a href="#system-custom">4. Create system <code>CUSTOM</code> Menu</a></li>
<li><a href="#org2ee5e51">5. <code>SPREF</code>: Set some of my personal prefrences</a></li>
<li><a href="#orgb9b0e8d">6. END</a></li>
<li><a href="#org0323877">7. EOF</a></li>
</ul>
</div>
</div>

<div id="outline-container-org970e641" class="outline-2">
<h2 id="org970e641"><span class="section-number-2">1</span> Metadata</h2>
<div class="outline-text-2" id="text-1">
<p>
The home for this HTML file is: <a href="https://richmit.github.io/hp42/custom.html">https://richmit.github.io/hp42/custom.html</a>
</p>

<p>
A PDF version of this file may be found here: <a href="https://richmit.github.io/hp42/custom.pdf">https://richmit.github.io/hp42/custom.pdf</a>
</p>

<p>
Files related to this document may be found on github: <a href="https://github.com/richmit/hp42">https://github.com/richmit/hp42</a>
</p>

<p>
Directory contents:
</p>
<table border="0" cellspacing="0" cellpadding="6" rules="none" frame="none" align="center">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left"><code>src</code></td>
<td class="org-left">-</td>
<td class="org-left">The org-mode file that generated this HTML document</td>
</tr>

<tr>
<td class="org-left"><code>src_42s</code></td>
<td class="org-left">-</td>
<td class="org-left">Ready to convert source listings for 42s code in this document</td>
</tr>

<tr>
<td class="org-left"><code>docs</code></td>
<td class="org-left">-</td>
<td class="org-left">This html document</td>
</tr>

<tr>
<td class="org-left"><code>bin</code></td>
<td class="org-left">-</td>
<td class="org-left">Importable RAW program files</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-introduction" class="outline-2">
<h2 id="introduction"><span class="section-number-2">2</span> Introduction</h2>
<div class="outline-text-2" id="text-introduction">
<p>
The custom menu on the 42s is a wonderful thing, but it is also very limited.  It's just too small!!  And it is only one level deep!!  So instead of simply
assigning functions to the menu keys, how about assigning programs to the keys which present a hierarchical menu of functions?  Coding up such programs is
tedious.  So this org-mode document has a Little bit of Emacs lisp that will consume a table, and generate a 42s program implementing a hierarchical menu.
</p>

<p>
The flow to create your custom CUST program:
</p>
<ul class="org-ul">
<li>Evaluate the "Generic menu generator" babel block in the <code>hp42s-meta.org</code> file.  This will define the function <code>MJR-generate-42-menu-code</code></li>
<li>Evaluate the "For CUSTOM-type Menus" babel block in the <code>hp42s-meta.org</code> file.  This will define the function <code>MJR-custom-x-gen</code></li>
<li>Define your menu in the <a href="#org832fc16">Menu Contents</a> section.</li>
<li>Evaluate the babel block in the <a href="#org1fc05b3">Menu Code</a> section below.</li>
<li>Load the program on your calculator</li>
</ul>
</div>

<div id="outline-container-orgef94af0" class="outline-3">
<h3 id="orgef94af0"><span class="section-number-3">2.1</span> Customizing Custom Menu Table</h3>
<div class="outline-text-3" id="text-2-1">
<p>
The first column (which I labeled Menu) describes the menu keys.  Colons are used to define a menu hierarchy.  For example "<code>top:mid:thingy</code>" means we have a
top level menu "<code>top</code>" containing a menu "<code>mid</code>" containing a function/program "<code>thingy</code>".  Another entry like "<code>top:thingy2</code>" would add a function/program
key "<code>thingy2</code>"to the "<code>top</code>" menu &#x2013; yes menus can contain a mix of functions/programs and menus.
</p>

<p>
The only limitation on menu hierarchy depth or size comes from the use of two digit local labels in the generated code.  A label is consume for each
function/program and for each menu page.
</p>

<p>
The second column is the function/program name/label to call.  If this is empty, then the menu name will be used.  For example "<code>SFUN:HYP:SINH</code>" will call the
<code>SINH</code> function if no Program is specified.
</p>

<p>
The other columns of the table are not used.
</p>
</div>
</div>
</div>

<div id="outline-container-orgb3f7b21" class="outline-2">
<h2 id="orgb3f7b21"><span class="section-number-2">3</span> Custom Menus</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-org832fc16" class="outline-3">
<h3 id="org832fc16"><span class="section-number-3">3.1</span> Menu Contents</h3>
<div class="outline-text-3" id="text-3-1">
<table id="org3b37fe8" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="box" align="center">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Menu</th>
<th scope="col" class="org-left">Function/Program</th>
<th scope="col" class="org-left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">SFUN</td>
<td class="org-left">&#xa0;</td>
<td class="org-left"><a href="https://richmit.github.io/hp42/math.html">https://richmit.github.io/hp42/math.html</a></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">MATH:POLY</td>
<td class="org-left">&#xa0;</td>
<td class="org-left"><a href="https://richmit.github.io/hp42/math.html">https://richmit.github.io/hp42/math.html</a></td>
</tr>

<tr>
<td class="org-left">MATH:FUNC</td>
<td class="org-left">FMENU</td>
<td class="org-left"><a href="https://richmit.github.io/hp42/pgmforfun.html">https://richmit.github.io/hp42/pgmforfun.html</a></td>
</tr>

<tr>
<td class="org-left">MATH:VEC3</td>
<td class="org-left">&#xa0;</td>
<td class="org-left"><a href="https://richmit.github.io/hp42/math.html">https://richmit.github.io/hp42/math.html</a></td>
</tr>

<tr>
<td class="org-left">MATH:NLA</td>
<td class="org-left">&#xa0;</td>
<td class="org-left"><a href="https://richmit.github.io/hp42/math.html">https://richmit.github.io/hp42/math.html</a></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">BASE</td>
<td class="org-left">&#xa0;</td>
<td class="org-left"><a href="https://richmit.github.io/hp42/base.html">https://richmit.github.io/hp42/base.html</a></td>
</tr>

<tr>
<td class="org-left">PHIL</td>
<td class="org-left">&#xa0;</td>
<td class="org-left"><a href="https://richmit.github.io/hp42/phil.html">https://richmit.github.io/hp42/phil.html</a></td>
</tr>

<tr>
<td class="org-left">MEAS</td>
<td class="org-left">&#xa0;</td>
<td class="org-left"><a href="https://richmit.github.io/hp42/meas.html">https://richmit.github.io/hp42/meas.html</a></td>
</tr>

<tr>
<td class="org-left">DATE</td>
<td class="org-left">DMENU</td>
<td class="org-left"><a href="https://richmit.github.io/hp42/date.html">https://richmit.github.io/hp42/date.html</a></td>
</tr>

<tr>
<td class="org-left">CONS</td>
<td class="org-left">&#xa0;</td>
<td class="org-left"><a href="https://richmit.github.io/hp42/cons.html">https://richmit.github.io/hp42/cons.html</a></td>
</tr>

<tr>
<td class="org-left">UNIT</td>
<td class="org-left">&#xa0;</td>
<td class="org-left"><a href="https://richmit.github.io/hp42/unit.html">https://richmit.github.io/hp42/unit.html</a></td>
</tr>

<tr>
<td class="org-left">SIPFX</td>
<td class="org-left">&#xa0;</td>
<td class="org-left"><a href="https://richmit.github.io/hp42/unit.html">https://richmit.github.io/hp42/unit.html</a></td>
</tr>

<tr>
<td class="org-left">UPROP</td>
<td class="org-left">&#xa0;</td>
<td class="org-left"><a href="https://richmit.github.io/hp42/uprop.html">https://richmit.github.io/hp42/uprop.html</a></td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org1fc05b3" class="outline-3">
<h3 id="org1fc05b3"><span class="section-number-3">3.2</span> Menu Code</h3>
<div class="outline-text-3" id="text-3-2">
<p>
The menu program is generated via the following bit of elisp.  You must first define the <code>MJR-generate-42-menu-code</code> and <code>MJR-custom-x-gen</code> by evaluating the code blocks in the <code>hp42s-meta.org</code> file.
</p>

<div class="org-src-container">
<pre class="src src-elisp">(MJR-generate-42-menu-code <span style="color: #fa8072;">"CUST"</span> 0 tbl 0 1 'stay 'up 'auto #'MJR-custom-gen-lab #'MJR-custom-gen-sub)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-hp42s"><span id="coderef-CUST" class="coderef-off"><span style="color: #ffa500;">@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span> (CUST)</span>
<span style="color: #ffa500;">@@@@ </span><span style="color: #ff7f24;">DSC: Auto-generated menu program</span>
<span style="color: #00ffff;">LBL</span> <span style="color: #fa8072;">"CUST"</span>
<span style="color: #00ffff;">LBL</span> 01            <span style="color: #ffa500;">@@@@ </span><span style="color: #ff7f24;">Page 1 of menu CUST</span>
<span style="color: #00ffff;">CLMENU</span>
<span style="color: #fa8072;">"SFUN"</span>
<span style="color: #00ffff;">KEY</span> 1 <span style="color: #00ffff;">XEQ</span> <span style="color: #fa8072;">"SFUN"</span>
<span style="color: #fa8072;">"MATH"</span>
<span style="color: #00ffff;">KEY</span> 2 <span style="color: #00ffff;">GTO</span> 03
<span style="color: #fa8072;">"BASE"</span>
<span style="color: #00ffff;">KEY</span> 3 <span style="color: #00ffff;">XEQ</span> <span style="color: #fa8072;">"BASE"</span>
<span style="color: #fa8072;">"PHIL"</span>
<span style="color: #00ffff;">KEY</span> 4 <span style="color: #00ffff;">XEQ</span> <span style="color: #fa8072;">"PHIL"</span>
<span style="color: #fa8072;">"MEAS"</span>
<span style="color: #00ffff;">KEY</span> 5 <span style="color: #00ffff;">XEQ</span> <span style="color: #fa8072;">"MEAS"</span>
<span style="color: #fa8072;">"DATE"</span>
<span style="color: #00ffff;">KEY</span> 6 <span style="color: #00ffff;">XEQ</span> <span style="color: #fa8072;">"DMENU"</span>
<span style="color: #00ffff;">KEY</span> 7 <span style="color: #00ffff;">GTO</span> 02
<span style="color: #00ffff;">KEY</span> 8 <span style="color: #00ffff;">GTO</span> 02
<span style="color: #00ffff;">KEY</span> 9 <span style="color: #00ffff;">GTO</span> 00
<span style="color: #00ffff;">MENU</span>
<span style="color: #00ffff;">STOP</span>
<span style="color: #00ffff;">GTO</span> 01
<span style="color: #00ffff;">LBL</span> 02            <span style="color: #ffa500;">@@@@ </span><span style="color: #ff7f24;">Page 2 of menu CUST</span>
<span style="color: #00ffff;">CLMENU</span>
<span style="color: #fa8072;">"CONS"</span>
<span style="color: #00ffff;">KEY</span> 1 <span style="color: #00ffff;">XEQ</span> <span style="color: #fa8072;">"CONS"</span>
<span style="color: #fa8072;">"UNIT"</span>
<span style="color: #00ffff;">KEY</span> 2 <span style="color: #00ffff;">XEQ</span> <span style="color: #fa8072;">"UNIT"</span>
<span style="color: #fa8072;">"SIPFX"</span>
<span style="color: #00ffff;">KEY</span> 3 <span style="color: #00ffff;">XEQ</span> <span style="color: #fa8072;">"SIPFX"</span>
<span style="color: #fa8072;">"UPROP"</span>
<span style="color: #00ffff;">KEY</span> 4 <span style="color: #00ffff;">XEQ</span> <span style="color: #fa8072;">"UPROP"</span>
<span style="color: #00ffff;">KEY</span> 7 <span style="color: #00ffff;">GTO</span> 01
<span style="color: #00ffff;">KEY</span> 8 <span style="color: #00ffff;">GTO</span> 01
<span style="color: #00ffff;">KEY</span> 9 <span style="color: #00ffff;">GTO</span> 00
<span style="color: #00ffff;">MENU</span>
<span style="color: #00ffff;">STOP</span>
<span style="color: #00ffff;">GTO</span> 02
<span style="color: #00ffff;">LBL</span> 03            <span style="color: #ffa500;">@@@@ </span><span style="color: #ff7f24;">Page 1 of menu MATH</span>
<span style="color: #00ffff;">CLMENU</span>
<span style="color: #fa8072;">"POLY"</span>
<span style="color: #00ffff;">KEY</span> 1 <span style="color: #00ffff;">XEQ</span> <span style="color: #fa8072;">"POLY"</span>
<span style="color: #fa8072;">"FUNC"</span>
<span style="color: #00ffff;">KEY</span> 2 <span style="color: #00ffff;">XEQ</span> <span style="color: #fa8072;">"FMENU"</span>
<span style="color: #fa8072;">"VEC3"</span>
<span style="color: #00ffff;">KEY</span> 3 <span style="color: #00ffff;">XEQ</span> <span style="color: #fa8072;">"VEC3"</span>
<span style="color: #fa8072;">"NLA"</span>
<span style="color: #00ffff;">KEY</span> 4 <span style="color: #00ffff;">XEQ</span> <span style="color: #fa8072;">"NLA"</span>
<span style="color: #00ffff;">KEY</span> 9 <span style="color: #00ffff;">GTO</span> 01
<span style="color: #00ffff;">MENU</span>
<span style="color: #00ffff;">STOP</span>
<span style="color: #00ffff;">GTO</span> 03
<span style="color: #00ffff;">LBL</span> 00 <span style="color: #ffa500;">@@@@ </span><span style="color: #ff7f24;">Application Exit</span>
<span style="color: #00ffff;">EXITALL</span>
<span style="color: #00ffff;">RTN</span>
<span style="color: #ffa500;">@@@@ </span><span style="color: #ff7f24;">Free labels start at: 4</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-system-custom" class="outline-2">
<h2 id="system-custom"><span class="section-number-2">4</span> Create system <code>CUSTOM</code> Menu</h2>
<div class="outline-text-2" id="text-system-custom">
<p>
Sometimes our carefully built in <code>CUSTOM</code> menu is lost &#x2013; an errant program or system memory clear.  What to do?  How about a program that will recreate your
<code>CUSTOM</code> menu when you need it?  In the table below we have the definition of our custom menu, and a bit of lisp that will write a 42s program to <code>ASSIGN</code>
each key.
</p>

<table id="org5ace7ed" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="box" align="center">


<colgroup>
<col  class="org-right" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">KEY#</th>
<th scope="col" class="org-left">ASSIGNment</th>
<th scope="col" class="org-left">Only On</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">1</td>
<td class="org-left">CUST</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-right">2</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-right">3</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-right">4</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-right">5</td>
<td class="org-left">EEPFX</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-right">6</td>
<td class="org-left">¦¦</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-right">7</td>
<td class="org-left">VirtV</td>
<td class="org-left">DM42</td>
</tr>

<tr>
<td class="org-right">8</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-right">9</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-right">10</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-right">11</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-right">12</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-right">13</td>
<td class="org-left">SST</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-right">14</td>
<td class="org-left">SST↑</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-right">15</td>
<td class="org-left">SST→</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-right">16</td>
<td class="org-left">GTO</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-right">17</td>
<td class="org-left">XEQ</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-right">18</td>
<td class="org-left">VIEW</td>
<td class="org-left">DM42</td>
</tr>

<tr>
<td class="org-right">18</td>
<td class="org-left">PRV</td>
<td class="org-left">!DM42</td>
</tr>
</tbody>
</table>

<p>
Simply evaluate the followign lisp block, and the 42s program will be created.
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #ffa500;">;; </span><span style="color: #ff7f24;">The generated code uses the existance of GrMod to guess if we are on a DM42</span>
(princ (message <span style="color: #fa8072;">"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ (ref:%s)\n"</span> <span style="color: #fa8072;">"MKCM"</span>))
(princ <span style="color: #fa8072;">"@@@@ DSC: Autogenerated menu program\n"</span>)
(princ <span style="color: #fa8072;">"LBL \"MKCM\"\n"</span>)
(princ <span style="color: #fa8072;">"CLKEYS\n"</span>)
(<span style="color: #00ffff;">cl-loop</span> for (da-key da-assignment da-pform) in tbl
         for da-assignment-fixed = (replace-regexp-in-string <span style="color: #fa8072;">"&#166;"</span> <span style="color: #fa8072;">"|"</span> da-assignment 't 't)
         for have-key = (not (zerop (length da-assignment-fixed)))
         when (<span style="color: #00ffff;">and</span> have-key (string-equal da-pform <span style="color: #fa8072;">"DM42"</span>))
         do (princ <span style="color: #fa8072;">"SF 25\nRCL \"GrMod\"\nFS?C 25\n"</span>)
         when (<span style="color: #00ffff;">and</span> have-key (string-equal da-pform <span style="color: #fa8072;">"!DM42"</span>))
         do (princ <span style="color: #fa8072;">"SF 25\nRCL \"GrMod\"\nFC?C 25\n"</span>)
         when have-key
         do (princ (message <span style="color: #fa8072;">"ASSIGN \"%s\" TO %02d\n"</span> da-assignment-fixed da-key))))
(princ <span style="color: #fa8072;">"RTN\n"</span>)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-hp42s"><span id="coderef-MKCM" class="coderef-off"><span style="color: #ffa500;">@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span> (MKCM)</span>
<span style="color: #ffa500;">@@@@ </span><span style="color: #ff7f24;">DSC: Autogenerated menu program</span>
<span style="color: #00ffff;">LBL</span> <span style="color: #fa8072;">"MKCM"</span>
<span style="color: #00ffff;">CLKEYS</span>
<span style="color: #00ffff;">ASSIGN</span> <span style="color: #fa8072;">"CUST"</span> TO 01
<span style="color: #00ffff;">ASSIGN</span> <span style="color: #fa8072;">"EEPFX"</span> TO 05
<span style="color: #00ffff;">ASSIGN</span> <span style="color: #fa8072;">"||"</span> TO 06
<span style="color: #00ffff;">SF</span> 25
<span style="color: #00ffff;">RCL</span> <span style="color: #fa8072;">"GrMod"</span>
<span style="color: #00ffff;">FS?C</span> 25
<span style="color: #00ffff;">ASSIGN</span> <span style="color: #fa8072;">"VirtV"</span> TO 07
<span style="color: #00ffff;">ASSIGN</span> <span style="color: #fa8072;">"SST"</span> TO 13
<span style="color: #00ffff;">ASSIGN</span> <span style="color: #fa8072;">"SST&#8593;"</span> TO 14
<span style="color: #00ffff;">ASSIGN</span> <span style="color: #fa8072;">"SST&#8594;"</span> TO 15
<span style="color: #00ffff;">ASSIGN</span> <span style="color: #fa8072;">"GTO"</span> TO 16
<span style="color: #00ffff;">ASSIGN</span> <span style="color: #fa8072;">"XEQ"</span> TO 17
<span style="color: #00ffff;">SF</span> 25
<span style="color: #00ffff;">RCL</span> <span style="color: #fa8072;">"GrMod"</span>
<span style="color: #00ffff;">FS?C</span> 25
<span style="color: #00ffff;">ASSIGN</span> <span style="color: #fa8072;">"VIEW"</span> TO 18
<span style="color: #00ffff;">SF</span> 25
<span style="color: #00ffff;">RCL</span> <span style="color: #fa8072;">"GrMod"</span>
<span style="color: #00ffff;">FC?C</span> 25
<span style="color: #00ffff;">ASSIGN</span> <span style="color: #fa8072;">"PRV"</span> TO 18
<span style="color: #00ffff;">RTN</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org2ee5e51" class="outline-2">
<h2 id="org2ee5e51"><span class="section-number-2">5</span> <code>SPREF</code>: Set some of my personal prefrences</h2>
<div class="outline-text-2" id="text-5">
<div class="org-src-container">
<pre class="src src-hp42s"><span id="coderef-SPREF" class="coderef-off"><span style="color: #ffa500;">@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span> (SPREF)</span>
<span style="color: #ffa500;">@@@@ </span><span style="color: #ff7f24;">DSC: Set some of my personal prefrences</span>
<span style="color: #ffa500;">@@@@ </span><span style="color: #ff7f24;">IN:  N/A</span>
<span style="color: #ffa500;">@@@@ </span><span style="color: #ff7f24;">OUT: N/A</span>
<span style="color: #ffa500;">@@@@ </span><span style="color: #ff7f24;">TST: free42_3.0.2</span>
<span style="color: #ffa500;">@@@@ </span><span style="color: #ff7f24;">BUG: This sets some of *my* favorite prefrences.  You might not like them. ;)</span>
<span style="color: #ffa500;">@@@@ </span><span style="color: #ff7f24;">UPD: 2021-04-05</span>
<span style="color: #00ffff;">LBL</span> <span style="color: #fa8072;">"SPREF"</span>
<span style="color: #00ffff;">FUNC</span> 00
<span style="color: #00ffff;">ALL</span>     <span style="color: #ffa500;">@@@@ </span><span style="color: #ff7f24;">Display all digits</span>
<span style="color: #00ffff;">RECT</span>    <span style="color: #ffa500;">@@@@ </span><span style="color: #ff7f24;">Complex number format</span>
<span style="color: #00ffff;">RAD</span>     <span style="color: #ffa500;">@@@@ </span><span style="color: #ff7f24;">Angle mode</span>
<span style="color: #00ffff;">CPXRES</span>  <span style="color: #ffa500;">@@@@ </span><span style="color: #ff7f24;">Complex results</span>
RDX.    <span style="color: #ffa500;">@@@@ </span><span style="color: #ff7f24;">Use periods</span>
<span style="color: #00ffff;">KEYASN</span>  <span style="color: #ffa500;">@@@@ </span><span style="color: #ff7f24;">Custom menu</span>
<span style="color: #00ffff;">DECM</span>    <span style="color: #ffa500;">@@@@ </span><span style="color: #ff7f24;">Make sure we are in decimal mode</span>
64      <span style="color: #ffa500;">@@@@ </span><span style="color: #ff7f24;">WSIZE</span>
<span style="color: #00ffff;">FS</span>? 78
BSIGNED <span style="color: #ffa500;">@@@@ </span><span style="color: #ff7f24;">Unsigned integer mode</span>
<span style="color: #00ffff;">FS</span>? 79
BWRAP   <span style="color: #ffa500;">@@@@ </span><span style="color: #ff7f24;">Don't wrap integers</span>
<span style="color: #00ffff;">DMY</span>     <span style="color: #ffa500;">@@@@ </span><span style="color: #ff7f24;">D.MY mode</span>
CL12    <span style="color: #ffa500;">@@@@ </span><span style="color: #ff7f24;">AM/PM mode</span>
4STK    <span style="color: #ffa500;">@@@@ </span><span style="color: #ff7f24;">Four level stack</span>
<span style="color: #00ffff;">EXITALL</span> <span style="color: #ffa500;">@@@@ </span><span style="color: #ff7f24;">Exit menus</span>
<span style="color: #00ffff;">RTN</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb9b0e8d" class="outline-2">
<h2 id="orgb9b0e8d"><span class="section-number-2">6</span> END</h2>
<div class="outline-text-2" id="text-6">
<div class="org-src-container">
<pre class="src src-hp42s"><span style="color: #ffa500;">@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span>
<span style="color: #00ffff;">END</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org0323877" class="outline-2">
<h2 id="org0323877"><span class="section-number-2">7</span> EOF</h2>
<div class="outline-text-2" id="text-7">
<br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br />
<br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br />
<br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br />
<br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br />
<br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br />
</div>
</div>
</div>
<div id="postamble" class="status">
Created by Mitch Richling <<a href="mailto:http://www.mitchr.me/">http://www.mitchr.me/</a>>.  Rendered on 2021-05-14 Fri 18:16 via <a href="https://www.gnu.org/software/emacs/">Emacs</a> 27.1 (<a href="https://orgmode.org">Org</a> mode 9.4.5)
</div>
</body>
</html>
